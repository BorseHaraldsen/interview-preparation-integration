# application.properties - NAV Integration Demo
# Plassering: src/main/resources/application.properties
#
# Standard konfigurasjon - KAFKA DEAKTIVERT som standard for demo
# For å aktivere Kafka: sett kafka.enabled=true
# =============================================================================
# SERVER KONFIGURASJON
# =============================================================================
server.port=8080
server.servlet.context-path=/interviewprep
server.error.include-message=always
server.error.include-binding-errors=always

# =============================================================================
# SPRING BOOT KONFIGURASJON  
# =============================================================================
spring.application.name=interviewprep

# =============================================================================
# DATABASE KONFIGURASJON (H2 in-memory)
# =============================================================================
# H2 database - enkelt å komme i gang med
spring.datasource.url=jdbc:h2:mem:navdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=nav
spring.datasource.password=password

# H2 Console
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

# =============================================================================
# JPA/HIBERNATE KONFIGURASJON
# =============================================================================
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.defer-datasource-initialization=true

# =============================================================================
# SQL DATA INITIALISERING (valgfritt)
# =============================================================================
spring.sql.init.mode=embedded
spring.sql.init.data-locations=classpath:data.sql
spring.sql.init.continue-on-error=true

# =============================================================================
# KAFKA KONFIGURASJON - DEAKTIVERT SOM STANDARD FOR DEMO
# =============================================================================
# For å aktivere Kafka: sett kafka.enabled=true
kafka.enabled=false

# Kafka konfigurasjon (brukes kun hvis kafka.enabled=true)
spring.kafka.bootstrap-servers=localhost:9092
spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer
spring.kafka.producer.value-serializer=org.springframework.kafka.support.serializer.JsonSerializer
spring.kafka.producer.acks=all
spring.kafka.producer.retries=3
spring.kafka.consumer.group-id=interviewprep-demo
spring.kafka.consumer.key-deserializer=org.apache.kafka.common.serialization.StringDeserializer
spring.kafka.consumer.value-deserializer=org.springframework.kafka.support.serializer.JsonDeserializer
spring.kafka.consumer.auto-offset-reset=earliest
spring.kafka.consumer.properties.spring.json.trusted.packages=com.example.interviewprep.models

# =============================================================================
# LOGGING KONFIGURASJON
# =============================================================================
logging.level.com.example.interviewprep=DEBUG
logging.level.org.springframework.web=INFO
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.apache.kafka=ERROR
logging.level.org.springframework.kafka=ERROR

# =============================================================================
# ACTUATOR (Health checks og monitoring)
# =============================================================================
management.endpoints.web.exposure.include=health,info,metrics,prometheus,trace
management.endpoint.health.show-details=always
management.metrics.export.prometheus.enabled=true
management.tracing.sampling.probability=1.0

# =============================================================================
# ENTERPRISE INTEGRATION CONFIGURATION
# =============================================================================
# Apache Camel
camel.springboot.name=nav-integration-platform
camel.springboot.main-run-controller=true
camel.springboot.jmx-enabled=true

# Oracle EBS Integration
oracle.ebs.base-url=http://localhost:8080/oracle-ebs-simulator
oracle.ebs.username=nav_integration
oracle.ebs.sync.batch-size=100
oracle.ebs.enabled=true

# SOAP Web Services
spring.webservices.path=/ws
spring.webservices.servlet.init.wsdl-location-uri=true

# Azure Service Bus (disabled by default)
azure.servicebus.enabled=false
azure.servicebus.connection-string=${AZURE_SERVICEBUS_CONNECTION_STRING:}
azure.servicebus.namespace=${AZURE_SERVICEBUS_NAMESPACE:nav-integration}

# Security Configuration
spring.security.oauth2.resourceserver.jwt.issuer-uri=${JWT_ISSUER_URI:http://localhost:8080/auth/realms/nav}
spring.security.oauth2.resourceserver.jwt.audiences=nav-integration-api

# Distributed Tracing
management.tracing.enabled=true
management.zipkin.tracing.endpoint=${ZIPKIN_ENDPOINT:http://localhost:9411/api/v2/spans}